<!DOCTYPE html>
<html>
  <head>
    <title>Parallel Core War</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="seedrandom.js"></script>
    <script type="text/javascript" src="color.js"></script>
    <script type="text/javascript" src="core.js"></script>
    <script type="text/javascript" src="rendercore.js"></script>
    <script type="text/javascript" src="index.js"></script>
  </head>
  <body>
    <h1>Parallel Core War</h1>
    <p>
      <canvas id="canvasCode" width="256" height="256"></canvas>
      <canvas id="canvasOwner" width="256" height="256"></canvas>
    </p>
    <p>
      Instruction counter: <span id="instructionCounter">0</span>
    </p>
    <p>
      <button onclick="reset_core()">Reset</button>
      <button onclick="run_core()">Run</button>
      <button onclick="stop_core()">Stop</button>
      <button onclick="step_core()">Step</button>
    </p>
    <table>
      <tr>
	<td valign=top>
	  <p>Source code:</p>
<textarea cols="50" rows="25" id="sourceCode">
;; Simple, though boring, self-replicator
targetpos:		target
sourcepos:		start
remaining:		(end-start)
start:			IF.+ remaining OR @targetpos @sourcepos @sourcepos
			IF.+ remaining ADD targetpos targetpos +2
			IF.+ remaining ADD sourcepos sourcepos +1
			+1
			targetpos
			IF.NZ @-1 SUB @+3 +1 @+2
			(end-start+1)
			sourcepos
			remaining
			IF.Z @-1 OR nexttarget +1 +1
			(target-targetpos)
nexttarget:		0
nextsource:		(start-sourcepos)
			-1
end:
target:
</textarea>
	</td>
	<td valign=top>
	  <p>Previous state:</p>
	  <textarea cols="65" rows="35" id="dumpArea"></textarea>
	  <br>
	  Lo: <input size="10" id="dumpLo" value="0" onchange="dump_range_change()">
	  Hi: <input size="10" id="dumpHi" value="0" onchange="dump_range_change()">
	</td>
	<td valign=top>
	  <p>Current state:</p>
	  <textarea cols="65" rows="35" id="dumpAreaPost"></textarea>
	</td>
      </tr>
    </table>
    <script>index_main();</script>
  </body>
</html>
